<!-- src/app/auth/login.component.html -->
<div class="login-wrapper">
  <div class="login-container">
    <div class="login-box">
      <!-- Header con logo y título -->
      <div class="login-header">
        <div class="logo-container">
          <img
            src="https://tudoctor.okmedic.online/files/tudoctorok.jpeg"
            alt="Logo OK-MEDIC"
            class="login-logo"
          >
        </div>
        <h1 class="login-title">OK-MEDIC</h1>
        <p class="login-subtitle">Sistema de Gestión Médica</p>
      </div>

      <!-- Formulario -->
      <form (ngSubmit)="onLogin()" #form="ngForm" class="login-form">
        <!-- Selector de Unidad Médica -->
        <div class="form-group">
          <label for="unidad_medica" class="form-label form-label-sm">
      <i class="fas fa-hospital me-2"></i>Unidad Médica
    </label>
          <select
            id="unidad_medica"
            name="unidad_medica"
           class="form-select form-select-sm"
            [(ngModel)]="credentials.unidad_medica"
            required
            [disabled]="cargandoUnidades"
          >
            <option value="" disabled [selected]="!credentials.unidad_medica">
              {{ cargandoUnidades ? 'Cargando...' : 'Seleccione una unidad' }}
            </option>
            <option *ngFor="let unidad of unidadesMedicas" [value]="unidad.name">
              {{ unidad.unimed_nombre }}
            </option>
          </select>
        </div>

        <!-- Campo de Email -->
        <div class="form-group">
          <label for="email" class="form-label form-label-sm">
      <i class="fas fa-envelope me-2"></i>Usuario
    </label>
          <input
            type="email"
            id="email"
            name="email"
             class="form-control form-control-sm"
            placeholder="usuario"
            [(ngModel)]="credentials.usr"
            required
          >
        </div>

        <!-- Campo de Contraseña -->
        <div class="form-group">
   <label for="password" class="form-label form-label-sm">
      <i class="fas fa-lock me-2"></i>Contraseña
    </label>
          <input
            type="password"
            id="password"
            name="password"
           class="form-control form-control-sm" 
            placeholder="Ingrese su contraseña"
            [(ngModel)]="credentials.pwd"
            required
          >
        </div>

        <!-- Mensaje de error -->
        <div *ngIf="error" class="alert alert-danger" role="alert">
          <i class="fas fa-exclamation-circle me-2"></i>
          {{ error }}
        </div>

        <!-- Botón de submit -->
        <button
          type="submit"
          [disabled]="loading || cargandoUnidades || !credentials.unidad_medica"
         class="btn btn-login btn-sm"
        >
          <span *ngIf="loading" class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
          <i *ngIf="!loading" class="fas fa-sign-in-alt me-2"></i>
          {{ loading ? 'Iniciando sesión...' : 'Iniciar Sesión' }}
        </button>
      </form>

      <!-- Enlaces adicionales -->
      <div class="login-footer">
        <a href="https://tudoctor.okmedic.online/forgot" target="_blank" class="login-link">
          <i class="fas fa-key me-1"></i> ¿Olvidó su contraseña?
        </a>
   
      </div>
    </div>
  </div>

  <!-- Footer global -->
  <div class="login-footer-global">
    <p class="mb-0">© 2025 OK-MEDIC. Sistema de Gestión Médica.</p>
  </div>
</div>